# 📦 文件上传命令对比详解文档

## 📚 目录

- [一、工具总览对比](#一工具总览对比)
- [二、rsync](#二rsync)
- [三、scp](#三scp)
- [四、sftp](#四sftp)
- [五、ftp](#五ftp)
- [六、总结选择建议](#六总结选择建议)

---

## 一、工具总览对比

| 工具  | 传输方式 | 安全性  | 支持增量  | 支持断点续传 | 是否支持目录同步 | 常用场景       |
| ----- | -------- | ------- | --------- | ------------ | ---------------- | -------------- |
| rsync | SSH、RSH | ✅ 高   | ✅ 支持   | ✅ 支持      | ✅ 支持          | 备份、部署     |
| scp   | SSH      | ✅ 高   | ❌ 不支持 | ❌ 不支持    | ✅ 支持          | 快速单次上传   |
| sftp  | SSH      | ✅ 高   | ❌ 不支持 | ✅ 手动操作  | ✅ 支持          | 安全交互传输   |
| ftp   | 明文/SSL | ❌ 一般 | ❌ 不支持 | ❌ 不支持    | ✅ 支持          | 内网、老旧系统 |

---

## 二、rsync

`rsync` 是最常用的同步工具，支持增量、压缩、SSH、断点续传等高级功能。

### 常用命令

```bash
rsync -avz -e ssh ./local-dir/ user@host:/remote-dir/
```

### 常用参数解释

| 参数             | 含义                                                   |
| ---------------- | ------------------------------------------------------ |
| `-a`             | archive 模式，递归同步，并保留权限、符号链接、时间戳等 |
| `-v`             | verbose，显示详细过程                                  |
| `-z`             | 压缩传输，加快速度                                     |
| `-r`             | 递归同步目录（已包含在 `-a` 中）                       |
| `-u`             | 只更新本地较新的文件                                   |
| `--delete`       | 删除目标中多余的文件（用于完全镜像）                   |
| `--progress`     | 显示实时传输进度                                       |
| `--exclude=xxx`  | 排除同步指定文件或目录                                 |
| `-e "ssh -p 22"` | 指定远程 shell（可更改 SSH 端口）                      |

---

## 三、scp

`scp` 是基于 SSH 的安全复制命令，适合一次性上传或下载，不支持增量。

### 常用命令

```bash
scp -r ./local-dir user@host:/remote-dir/
```

### 常用参数解释

| 参数 | 含义                         |
| ---- | ---------------------------- |
| `-r` | 递归复制整个目录             |
| `-P` | 指定远程主机端口（注意大写） |
| `-i` | 指定私钥文件（用于 SSH）     |
| `-v` | 显示调试信息，帮助排错       |
| `-C` | 启用压缩                     |
| `-p` | 保留文件时间、权限           |

> ⚠️ 不支持断点续传和增量，上传大文件失败后只能重来。

---

## 四、sftp

`sftp` 是基于 SSH 的交互式文件传输命令，支持图形化客户端和手动操作。

### 连接并进入交互模式

```bash
sftp user@host
```

### 常用命令（交互模式）

| 命令    | 含义         |
| ------- | ------------ |
| `ls`    | 查看远程目录 |
| `cd`    | 切换远程目录 |
| `get`   | 下载文件     |
| `put`   | 上传文件     |
| `mkdir` | 创建远程目录 |
| `rm`    | 删除远程文件 |
| `exit`  | 退出 sftp    |

### 非交互式上传

```bash
sftp user@host <<EOF
put local.txt /remote/path/
EOF
```

---

## 五、ftp

`ftp` 是一种老旧的传输协议，支持匿名访问，适合内网传输但不建议在公网使用。

### 连接方式

```bash
ftp host
# 然后输入用户名和密码
```

### 常用命令（交互模式）

| 命令   | 含义         |
| ------ | ------------ |
| `open` | 连接到服务器 |
| `user` | 输入用户名   |
| `ls`   | 查看目录     |
| `cd`   | 切换目录     |
| `put`  | 上传文件     |
| `get`  | 下载文件     |
| `bye`  | 退出 ftp     |

> ⚠️ 默认明文传输，需通过 FTPS/SFTP 才能加密。

---

## 六、总结选择建议

| 场景                       | 推荐工具 | 原因说明                                 |
| -------------------------- | -------- | ---------------------------------------- |
| ✅ 大量文件、支持增量同步  | `rsync`  | 支持压缩、断点续传、排除文件、删除同步等 |
| ✅ 快速一次性上传          | `scp`    | 简单直接，依赖 SSH                       |
| ✅ 交互式管理远程文件      | `sftp`   | 安全且直观操作远程文件                   |
| ⚠️ 老旧服务器、无 SSH 支持 | `ftp`    | 内网可用，公网建议谨慎                   |

---

## 📎 示例对比

### 上传整个目录到远程

| 工具  | 命令示例                                         |
| ----- | ------------------------------------------------ |
| rsync | `rsync -avz ./local-dir/ user@host:/remote-dir/` |
| scp   | `scp -r ./local-dir user@host:/remote-dir/`      |
| sftp  | `sftp user@host` → `put -r local-dir`（交互式）  |
| ftp   | `ftp host` → `put local-file`                    |

---

如需打包成 `.md` 文件我可以帮你导出。你想下载这个 Markdown 文件吗？还是我贴出来你复制？
