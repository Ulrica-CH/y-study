# è®¾è®¡æ¨¡å¼

## ğŸ“‹ ç›®å½•å¯¼èˆª

- [åŸºç¡€æ¦‚å¿µ](#åŸºç¡€æ¦‚å¿µ)
- [è®¾è®¡æ¨¡å¼åˆ†ç±»](#è®¾è®¡æ¨¡å¼åˆ†ç±»)
- [å‰ç«¯å¸¸ç”¨è®¾è®¡æ¨¡å¼](#å‰ç«¯å¸¸ç”¨è®¾è®¡æ¨¡å¼)
- [åˆ›å»ºå‹æ¨¡å¼](#åˆ›å»ºå‹æ¨¡å¼)
  - [å•ä¾‹æ¨¡å¼](#å•ä¾‹æ¨¡å¼)
  - [å·¥å‚æ¨¡å¼](#å·¥å‚æ¨¡å¼)
  - [æŠ½è±¡å·¥å‚æ¨¡å¼](#æŠ½è±¡å·¥å‚æ¨¡å¼)
  - [å»ºé€ è€…æ¨¡å¼](#å»ºé€ è€…æ¨¡å¼)
  - [åŸå‹æ¨¡å¼](#åŸå‹æ¨¡å¼)
- [ç»“æ„å‹æ¨¡å¼](#ç»“æ„å‹æ¨¡å¼)
  - [é€‚é…å™¨æ¨¡å¼](#é€‚é…å™¨æ¨¡å¼)
  - [è£…é¥°å™¨æ¨¡å¼](#è£…é¥°å™¨æ¨¡å¼)
  - [ä»£ç†æ¨¡å¼](#ä»£ç†æ¨¡å¼)
  - [å¤–è§‚æ¨¡å¼](#å¤–è§‚æ¨¡å¼)
  - [æ¡¥æ¥æ¨¡å¼](#æ¡¥æ¥æ¨¡å¼)
  - [ç»„åˆæ¨¡å¼](#ç»„åˆæ¨¡å¼)
  - [äº«å…ƒæ¨¡å¼](#äº«å…ƒæ¨¡å¼)
- [è¡Œä¸ºå‹æ¨¡å¼](#è¡Œä¸ºå‹æ¨¡å¼)
  - [è§‚å¯Ÿè€…æ¨¡å¼](#è§‚å¯Ÿè€…æ¨¡å¼)
  - [æ¨¡æ¿æ–¹æ³•æ¨¡å¼](#æ¨¡æ¿æ–¹æ³•æ¨¡å¼)
  - [ç­–ç•¥æ¨¡å¼](#ç­–ç•¥æ¨¡å¼)
  - [èŒè´£é“¾æ¨¡å¼](#èŒè´£é“¾æ¨¡å¼)
  - [å‘½ä»¤æ¨¡å¼](#å‘½ä»¤æ¨¡å¼)
  - [è®¿é—®è€…æ¨¡å¼](#è®¿é—®è€…æ¨¡å¼)
  - [çŠ¶æ€æ¨¡å¼](#çŠ¶æ€æ¨¡å¼)
  - [å¤‡å¿˜å½•æ¨¡å¼](#å¤‡å¿˜å½•æ¨¡å¼)
  - [è¿­ä»£å™¨æ¨¡å¼](#è¿­ä»£å™¨æ¨¡å¼)
  - [è§£é‡Šå™¨æ¨¡å¼](#è§£é‡Šå™¨æ¨¡å¼)

---

## åŸºç¡€æ¦‚å¿µ

è®¾è®¡æ¨¡å¼æ˜¯å¼€å‘ä¸­è§£å†³é—®é¢˜çš„ç»å…¸æ–¹æ¡ˆ,ä¸æ˜¯ä»£ç ,è€Œæ˜¯ä¸€ç§é€šç”¨çš„æ€è·¯,å¸®åŠ©æç¤ºä»£ç çš„å¯ç»´æŠ¤æ€§,å¯æ‰©å±•æ€§

## è®¾è®¡æ¨¡å¼åˆ†ç±»

- **åˆ›å»ºå‹ create**: ç®¡ç†å®ä¾‹çš„åˆ›å»º,å¢åŠ ä»£ç çµæ´»æ€§
- **ç»“æ„å‹ structure**: ç®€åŒ–å¯¹è±¡ä¹‹é—´çš„å¤æ‚å…³ç³»
- **è¡Œä¸ºå‹ behavior**: ç®€åŒ–å¯¹è±¡ä¹‹é—´çš„äº¤äº’å’ŒèŒè´£åˆ†é…

## å‰ç«¯å¸¸ç”¨è®¾è®¡æ¨¡å¼

### ğŸ¯ æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼

| æ¨¡å¼             | ä½¿ç”¨é¢‘ç‡   | å‰ç«¯åº”ç”¨åœºæ™¯                       |
| ---------------- | ---------- | ---------------------------------- |
| **å•ä¾‹æ¨¡å¼**     | â­â­â­â­â­ | å…¨å±€çŠ¶æ€ç®¡ç†ã€è·¯ç”±ç®¡ç†ã€å¼¹çª—ç®¡ç†   |
| **è§‚å¯Ÿè€…æ¨¡å¼**   | â­â­â­â­â­ | äº‹ä»¶ç³»ç»Ÿã€æ•°æ®ç»‘å®šã€ç»„ä»¶é€šä¿¡       |
| **å·¥å‚æ¨¡å¼**     | â­â­â­â­   | ç»„ä»¶åˆ›å»ºã€æ’ä»¶ç³»ç»Ÿã€UI ç»„ä»¶åº“      |
| **ç­–ç•¥æ¨¡å¼**     | â­â­â­â­   | è¡¨å•éªŒè¯ã€æ”¯ä»˜æ–¹å¼ã€æ’åºç®—æ³•       |
| **ä»£ç†æ¨¡å¼**     | â­â­â­â­   | å›¾ç‰‡æ‡’åŠ è½½ã€ç¼“å­˜ä»£ç†ã€æƒé™æ§åˆ¶     |
| **è£…é¥°å™¨æ¨¡å¼**   | â­â­â­     | é«˜é˜¶ç»„ä»¶ã€ä¸­é—´ä»¶ã€åŠŸèƒ½å¢å¼º         |
| **é€‚é…å™¨æ¨¡å¼**   | â­â­â­     | API é€‚é…ã€ç¬¬ä¸‰æ–¹åº“é›†æˆã€å…¼å®¹æ€§å¤„ç† |
| **çŠ¶æ€æ¨¡å¼**     | â­â­â­     | æ¸¸æˆçŠ¶æ€ã€è¡¨å•çŠ¶æ€ã€å·¥ä½œæµ         |
| **å‘½ä»¤æ¨¡å¼**     | â­â­       | æ’¤é”€é‡åšã€å®å‘½ä»¤ã€å¿«æ·é”®           |
| **æ¨¡æ¿æ–¹æ³•æ¨¡å¼** | â­â­       | ç®—æ³•æ¡†æ¶ã€ç”Ÿå‘½å‘¨æœŸé’©å­             |

### ğŸš€ å‰ç«¯æ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼

#### React ä¸­çš„è®¾è®¡æ¨¡å¼

- **ç»„åˆæ¨¡å¼**: JSX ç»„ä»¶æ ‘ç»“æ„
- **è§‚å¯Ÿè€…æ¨¡å¼**: useStateã€useEffect å“åº”å¼æ›´æ–°
- **å·¥å‚æ¨¡å¼**: React.createElement
- **ä»£ç†æ¨¡å¼**: React.memoã€useMemo
- **è£…é¥°å™¨æ¨¡å¼**: HOC (é«˜é˜¶ç»„ä»¶)
- **ç­–ç•¥æ¨¡å¼**: æ¡ä»¶æ¸²æŸ“ã€è·¯ç”±åŒ¹é…

#### Vue ä¸­çš„è®¾è®¡æ¨¡å¼

- **è§‚å¯Ÿè€…æ¨¡å¼**: å“åº”å¼ç³»ç»Ÿã€äº‹ä»¶æ€»çº¿
- **ä»£ç†æ¨¡å¼**: Vue 3 Proxy å“åº”å¼
- **å·¥å‚æ¨¡å¼**: Vue.component æ³¨å†Œ
- **ç­–ç•¥æ¨¡å¼**: æŒ‡ä»¤ç³»ç»Ÿã€è¿‡æ»¤å™¨
- **è£…é¥°å™¨æ¨¡å¼**: æ··å…¥ (mixin)ã€æ’ä»¶ç³»ç»Ÿ

#### Angular ä¸­çš„è®¾è®¡æ¨¡å¼

- **ä¾èµ–æ³¨å…¥**: æœåŠ¡ç®¡ç†
- **è§‚å¯Ÿè€…æ¨¡å¼**: RxJS Observable
- **ç­–ç•¥æ¨¡å¼**: ç®¡é“ (Pipe)
- **è£…é¥°å™¨æ¨¡å¼**: è£…é¥°å™¨è¯­æ³•
- **å·¥å‚æ¨¡å¼**: æœåŠ¡å·¥å‚

### ğŸ’¡ å®é™…å¼€å‘å»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨ç®€å•æ¨¡å¼**: å•ä¾‹ã€è§‚å¯Ÿè€…ã€å·¥å‚
2. **æ ¹æ®åœºæ™¯é€‰æ‹©**: ä¸è¦ä¸ºäº†ç”¨æ¨¡å¼è€Œç”¨æ¨¡å¼
3. **ä¿æŒä»£ç ç®€æ´**: è¿‡åº¦è®¾è®¡æ¯”ä¸è®¾è®¡æ›´ç³Ÿç³•
4. **å›¢é˜Ÿç»Ÿä¸€**: åœ¨å›¢é˜Ÿä¸­ä¿æŒè®¾è®¡æ¨¡å¼çš„ä¸€è‡´æ€§

## åˆ›å»ºå‹æ¨¡å¼

### åˆ›å»ºå‹æ¨¡å¼ï¼ˆ5 ç§ï¼‰

1. **å•ä¾‹æ¨¡å¼** - ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹
2. **å·¥å‚æ¨¡å¼** - å°è£…å¯¹è±¡åˆ›å»ºè¿‡ç¨‹
3. **æŠ½è±¡å·¥å‚æ¨¡å¼** - åˆ›å»ºç›¸å…³å¯¹è±¡æ—
4. **å»ºé€ è€…æ¨¡å¼** - åˆ†æ­¥éª¤æ„å»ºå¤æ‚å¯¹è±¡
5. **åŸå‹æ¨¡å¼** - é€šè¿‡å…‹éš†åˆ›å»ºå¯¹è±¡

### ç»“æ„å‹æ¨¡å¼ï¼ˆ7 ç§ï¼‰

1. **é€‚é…å™¨æ¨¡å¼** - è®©ä¸å…¼å®¹æ¥å£å¯ä»¥ä¸€èµ·å·¥ä½œ
2. **è£…é¥°å™¨æ¨¡å¼** - åŠ¨æ€æ·»åŠ åŠŸèƒ½
3. **ä»£ç†æ¨¡å¼** - æ§åˆ¶å¯¹è±¡è®¿é—®
4. **å¤–è§‚æ¨¡å¼** - ç®€åŒ–å¤æ‚ç³»ç»Ÿæ¥å£
5. **æ¡¥æ¥æ¨¡å¼** - åˆ†ç¦»æŠ½è±¡å’Œå®ç°
6. **ç»„åˆæ¨¡å¼** - å¤„ç†æ ‘å½¢ç»“æ„
7. **äº«å…ƒæ¨¡å¼** - å…±äº«ç»†ç²’åº¦å¯¹è±¡

### è¡Œä¸ºå‹æ¨¡å¼ï¼ˆ11 ç§ï¼‰

1. **è§‚å¯Ÿè€…æ¨¡å¼** - ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»
2. **æ¨¡æ¿æ–¹æ³•æ¨¡å¼** - å®šä¹‰ç®—æ³•éª¨æ¶
3. **ç­–ç•¥æ¨¡å¼** - å°è£…å¯æ›¿æ¢çš„ç®—æ³•
4. **èŒè´£é“¾æ¨¡å¼** - é“¾å¼å¤„ç†è¯·æ±‚
5. **å‘½ä»¤æ¨¡å¼** - å°è£…è¯·æ±‚ä¸ºå¯¹è±¡
6. **è®¿é—®è€…æ¨¡å¼** - åœ¨ä¸æ”¹å˜ç±»çš„å‰æä¸‹æ·»åŠ æ“ä½œ
7. **çŠ¶æ€æ¨¡å¼** - å¯¹è±¡çŠ¶æ€æ”¹å˜è¡Œä¸º
8. **å¤‡å¿˜å½•æ¨¡å¼** - ä¿å­˜å’Œæ¢å¤å¯¹è±¡çŠ¶æ€
9. **è¿­ä»£å™¨æ¨¡å¼** - é¡ºåºè®¿é—®é›†åˆå…ƒç´ 
10. **è§£é‡Šå™¨æ¨¡å¼** - è§£é‡Šç‰¹å®šè¯­æ³•

### åˆ›å»ºå‹

#### å•ä¾‹æ¨¡å¼ {#å•ä¾‹æ¨¡å¼}

ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹,å¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹

- ä¼˜ç‚¹:
  - å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹,èŠ‚çœå†…å­˜
  - é¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å®ä¾‹,æé«˜æ€§èƒ½
  - é¿å…æ•°æ®ä¸ä¸€è‡´,ä¿è¯æ•°æ®ä¸€è‡´æ€§
- ä½¿ç”¨åœºæ™¯
  - å…¨å‰§çŠ¶æ€ç®¡ç†
  - æ•°æ®åº“è¿æ¥ç­‰
  - å…¨å±€ Loading çŠ¶æ€

```javascript
class Single {
  constructor() {}
}
Single.instance = null;
Single.getInstance = function () {
  if (!Single.instance) {
    Single.instance = new Single();
  }
  return Single.instance;
};

const single = Single.getInstance();
const single2 = Single.getInstance();
console.log(single === single2);
```

#### å·¥å‚æ¨¡å¼ {#å·¥å‚æ¨¡å¼}

- ä¼˜ç‚¹:
  - å°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»,é™ä½è€¦åˆåº¦
  - æé«˜ä»£ç çš„çµæ´»æ€§
  - æé«˜ä»£ç çš„å¤ç”¨æ€§
- ä½¿ç”¨åœºæ™¯
  - å¯¹è±¡çš„åˆ›å»ºå¤æ‚,éœ€è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ›å»ºä¸åŒçš„å¯¹è±¡
  - éœ€è¦åˆ›å»ºçš„å¯¹è±¡ç±»å‹è¾ƒå¤š,ä¸æ–¹ä¾¿ç®¡ç†

```javascript
class Person {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
}

class PersonFactory {
  createPerson(name) {
    return new Person(name, 18);
  }
}

const personFactory = new PersonFactory();
const person = personFactory.createPerson("John");
const person2 = personFactory.createPerson("Jane");
/**
 * Person { name: 'John', age: 18 }
 * Person { name: 'Jane', age: 18 }
 */
console.log(person, person2);
```

#### æŠ½è±¡å·¥å‚æ¨¡å¼ {#æŠ½è±¡å·¥å‚æ¨¡å¼}

åˆ›å»ºä¸€ç»„ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„å¯¹è±¡æ—¶,æŠ½è±¡å·¥å‚æ¨¡å¼èƒ½å¸®åŠ©æˆ‘ä»¬ç»Ÿä¸€åˆ›å»ºæµç¨‹,è€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„å®ç°

- ä¼˜ç‚¹:
  - é’ˆå¯¹å¤šä¸ªäº§å“æ—,æä¾›ä¸€ä¸ªç»Ÿä¸€çš„åˆ›å»ºæ¥å£
  - å°†å®¢æˆ·ç«¯ä¸å…·ä½“çš„äº§å“å®ç°è§£è€¦
  - ç¡®ä¿äº†åˆ›å»ºä¸€æ•´å¥—ç›¸å…³è”å¯¹è±¡çš„æµç¨‹ç®€å•ç»Ÿä¸€
- ä½¿ç”¨åœºæ™¯
  - éœ€è¦åˆ›å»ºä¸€ç»„ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„å¯¹è±¡æ—¶
  - éœ€è¦ç»Ÿä¸€åˆ›å»ºæµç¨‹,è€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„å®ç°

```javascript
class ProductA {
  constructor() {
    this.name = "ProductA";
  }
}

class ProductB {
  constructor() {
    this.name = "ProductB";
  }
}

class FactoryA {
  createProduct() {
    return new ProductA();
  }
}

class FactoryB {
  createProduct() {
    return new ProductB();
  }
}

function createProduct(factory) {
  return factory.createProduct();
}

const productA = createProduct(new FactoryA());
const productB = createProduct(new FactoryB());
/** ProductA { name: 'ProductA' } ProductB { name: 'ProductB' } */
console.log(productA, productB);
```

#### å»ºé€ è€…æ¨¡å¼ {#å»ºé€ è€…æ¨¡å¼}

å¦‚æœä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºéœ€è¦ä¾èµ–å¤šä¸ªæ­¥éª¤å’Œå¤šä¸ªéƒ¨åˆ†çš„æ—¶å€™,å»ºé€ è€…æ¨¡å¼å¯ä»¥é€šè¿‡é€æ­¥æ„å»ºçš„æ–¹å¼æ¥ç¡®ä¿åˆ›å»ºæµç¨‹çš„æ¸…æ™°å’Œå¯æ§,é€‚ç”¨äºå¤æ‚å¯¹è±¡çš„åˆ›å»º,å¦‚åŠ¨æ€è¡¨å•ç­‰

- ä¼˜ç‚¹:
  - ç®€åŒ–å¤æ‚å¯¹è±¡çš„åˆ›å»ºé€»è¾‘
  - æä¾›æ¸…æ™°çš„ API
  - éšè—å…·ä½“çš„å¤æ‚æ„å»ºç»†èŠ‚
  - æ”¯æŒæ¡ä»¶æ„å»º,åˆ©äºæ‹“å±•ç»´æŠ¤
- ä½¿ç”¨åœºæ™¯
  - å¤æ‚ UI ç»„ä»¶
  - å¤æ‚è¡¨å•

```javascript
// å¦‚æœç›´æ¥æ„å»º Formï¼Œä¼šå¾ˆå¤æ‚ï¼Œè¦å…³ç³»å…·ä½“ä¼ é€’çš„å¤æ‚å‚æ•° ä¸å¥½æ‰©å±•å’Œæ¡ä»¶åˆ¤æ–­
const form = new Form();
form.addField({ type: "text", label: "Name" });
form.addField({ type: "checkbox", label: "Subscribe" });
form.addField({ type: "select", label: "City", options: ["åŒ—äº¬", "ä¸Šæµ·"] });

class Form {
  constructor() {
    this.fields = [];
  }

  addField(field) {
    this.fields.push(field);
  }

  getForm() {
    return this.fields;
  }
}

class FormBuilder {
  constructor() {
    this.form = new Form();
  }

  addTextField(label) {
    this.form.addField({ type: "text", label });
    return this;
  }

  addCheckboxField(label) {
    this.form.addField({ type: "checkbox", label });
    return this;
  }

  build() {
    return this.form;
  }
}

const formBuilder = new FormBuilder();
const form = formBuilder
  .addTextField("Name")
  .addCheckboxField("Subscribe")
  .build(); // å¿…é¡»è¿™æ ·è®¾è®¡ï¼Œè®¾è®¡å¦‚æ­¤

console.log(form.getForm()); // [{type: 'text', label: 'Name'}, {type: 'checkbox', label: 'Subscribe'}]
```

- è¿™ä¸ªç±»ä¼¼æ’ä»¶åŒ–æ€æƒ³

#### åŸå‹æ¨¡å¼ {#åŸå‹æ¨¡å¼}

é€šè¿‡æ‹·è´å·²æœ‰å¯¹è±¡æ¥é¿å…é‡å¤çš„åˆå§‹åŒ–æ“ä½œ

- ä¼˜ç‚¹:

  - é¿å…é‡å¤çš„åˆå§‹åŒ–æ“ä½œ
  - æé«˜æ€§èƒ½

- ä½¿ç”¨åœºæ™¯
  - æ¸²æŸ“å¤§é‡ç±»ä¼¼çš„ UI ç»„ä»¶æˆ–è€…èŠ‚ç‚¹

```javascript
class Prototype {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
  clone() {
    return new Prototype(this.name, this.age);
  }
}

const prototype = new Prototype("John", 18);
const prototype2 = prototype.clone();
console.log(prototype, prototype2);
```

## ç»“æ„å‹æ¨¡å¼

#### 1. é€‚é…å™¨æ¨¡å¼ {#é€‚é…å™¨æ¨¡å¼}

**è§£é‡Š**ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿ä¸å…¼å®¹çš„æ¥å£å¯ä»¥ä¸€èµ·å·¥ä½œã€‚

**ä¼˜ç‚¹**ï¼š

- è®©ä¸å…¼å®¹çš„æ¥å£å¯ä»¥ä¸€èµ·å·¥ä½œ
- æé«˜ä»£ç çš„å¤ç”¨æ€§
- é™ä½ç³»ç»Ÿè€¦åˆåº¦

**ä½¿ç”¨åœºæ™¯**ï¼š

- é›†æˆç¬¬ä¸‰æ–¹åº“
- æ–°æ—§ç³»ç»Ÿå…¼å®¹
- æ¥å£ä¸åŒ¹é…çš„æƒ…å†µ

```javascript
// æ—§æ¥å£
class OldInterface {
  specificRequest() {
    return "ç‰¹æ®Šè¯·æ±‚";
  }
}

// æ–°æ¥å£
class NewInterface {
  request() {
    return "æ ‡å‡†è¯·æ±‚";
  }
}

// é€‚é…å™¨
class Adapter extends NewInterface {
  constructor(oldInterface) {
    super();
    this.oldInterface = oldInterface;
  }

  request() {
    const result = this.oldInterface.specificRequest();
    return `é€‚é…å™¨: (è½¬æ¢) ${result}`;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const oldInterface = new OldInterface();
const adapter = new Adapter(oldInterface);
console.log(adapter.request()); // "é€‚é…å™¨: (è½¬æ¢) ç‰¹æ®Šè¯·æ±‚"
```

#### 2. è£…é¥°å™¨æ¨¡å¼ {#è£…é¥°å™¨æ¨¡å¼}

**è§£é‡Š**ï¼šåŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œè€Œä¸æ”¹å˜å…¶ç»“æ„ã€‚

**ä¼˜ç‚¹**ï¼š

- åŠ¨æ€æ‰©å±•å¯¹è±¡åŠŸèƒ½
- æ¯”ç»§æ‰¿æ›´çµæ´»
- ç¬¦åˆå¼€é—­åŸåˆ™

**ä½¿ç”¨åœºæ™¯**ï¼š

- éœ€è¦åŠ¨æ€æ·»åŠ åŠŸèƒ½
- ä¸æƒ³ä½¿ç”¨ç»§æ‰¿
- åŠŸèƒ½ç»„åˆå¤æ‚

```javascript
// åŸºç¡€ç»„ä»¶
class Coffee {
  cost() {
    return 10;
  }

  description() {
    return "ç®€å•å’–å•¡";
  }
}

// è£…é¥°å™¨åŸºç±»
class CoffeeDecorator {
  constructor(coffee) {
    this.coffee = coffee;
  }

  cost() {
    return this.coffee.cost();
  }

  description() {
    return this.coffee.description();
  }
}

// å…·ä½“è£…é¥°å™¨
class MilkDecorator extends CoffeeDecorator {
  cost() {
    return this.coffee.cost() + 2;
  }

  description() {
    return this.coffee.description() + ", åŠ å¥¶";
  }
}

class SugarDecorator extends CoffeeDecorator {
  cost() {
    return this.coffee.cost() + 1;
  }

  description() {
    return this.coffee.description() + ", åŠ ç³–";
  }
}

// ä½¿ç”¨ç¤ºä¾‹
let coffee = new Coffee();
coffee = new MilkDecorator(coffee);
coffee = new SugarDecorator(coffee);

console.log(coffee.description()); // "ç®€å•å’–å•¡, åŠ å¥¶, åŠ ç³–"
console.log(coffee.cost()); // 13
```

#### 3. ä»£ç†æ¨¡å¼ {#ä»£ç†æ¨¡å¼}

**è§£é‡Š**ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚

**ä¼˜ç‚¹**ï¼š

- æ§åˆ¶å¯¹è±¡è®¿é—®
- æ·»åŠ é¢å¤–åŠŸèƒ½
- å»¶è¿ŸåŠ è½½

**ä½¿ç”¨åœºæ™¯**ï¼š

- è¿œç¨‹ä»£ç†
- è™šæ‹Ÿä»£ç†
- ä¿æŠ¤ä»£ç†
- ç¼“å­˜ä»£ç†

```javascript
// çœŸå®å¯¹è±¡
class RealImage {
  constructor(filename) {
    this.filename = filename;
    this.loadFromDisk();
  }

  loadFromDisk() {
    console.log(`åŠ è½½å›¾ç‰‡: ${this.filename}`);
  }

  display() {
    console.log(`æ˜¾ç¤ºå›¾ç‰‡: ${this.filename}`);
  }
}

// ä»£ç†å¯¹è±¡
class ProxyImage {
  constructor(filename) {
    this.filename = filename;
    this.realImage = null;
  }

  display() {
    if (!this.realImage) {
      this.realImage = new RealImage(this.filename);
    }
    this.realImage.display();
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const image = new ProxyImage("test.jpg");
// æ­¤æ—¶è¿˜æ²¡æœ‰åŠ è½½å›¾ç‰‡
image.display(); // åŠ è½½å›¾ç‰‡: test.jpg, æ˜¾ç¤ºå›¾ç‰‡: test.jpg
image.display(); // æ˜¾ç¤ºå›¾ç‰‡: test.jpg (ç›´æ¥æ˜¾ç¤ºï¼Œä¸å†åŠ è½½)
```

#### 4. å¤–è§‚æ¨¡å¼ {#å¤–è§‚æ¨¡å¼}

**è§£é‡Š**ï¼šä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚

**ä¼˜ç‚¹**ï¼š

- ç®€åŒ–å®¢æˆ·ç«¯è°ƒç”¨
- é™ä½ç³»ç»Ÿè€¦åˆåº¦
- æä¾›ç»Ÿä¸€æ¥å£

**ä½¿ç”¨åœºæ™¯**ï¼š

- å¤æ‚ç³»ç»Ÿç®€åŒ–
- ç¬¬ä¸‰æ–¹åº“å°è£…
- å­ç³»ç»Ÿæ•´åˆ

```javascript
// å­ç³»ç»Ÿ
class CPU {
  freeze() {
    console.log("CPU å†»ç»“");
  }
  jump(position) {
    console.log(`CPU è·³è½¬åˆ°ä½ç½®: ${position}`);
  }
  execute() {
    console.log("CPU æ‰§è¡Œ");
  }
}

class Memory {
  load(position, data) {
    console.log(`å†…å­˜åŠ è½½æ•°æ®åˆ°ä½ç½®: ${position}`);
  }
}

class HardDrive {
  read(lba, size) {
    console.log(`ç¡¬ç›˜è¯»å–: LBA ${lba}, å¤§å° ${size}`);
  }
}

// å¤–è§‚
class ComputerFacade {
  constructor() {
    this.cpu = new CPU();
    this.memory = new Memory();
    this.hardDrive = new HardDrive();
  }

  start() {
    this.cpu.freeze();
    this.memory.load(0, this.hardDrive.read(0, 1024));
    this.cpu.jump(0);
    this.cpu.execute();
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const computer = new ComputerFacade();
computer.start();
```

#### 5. æ¡¥æ¥æ¨¡å¼ {#æ¡¥æ¥æ¨¡å¼}

**è§£é‡Š**ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚

**ä¼˜ç‚¹**ï¼š

- æŠ½è±¡å’Œå®ç°åˆ†ç¦»
- æé«˜ç³»ç»Ÿå¯æ‰©å±•æ€§
- å‡å°‘ç»§æ‰¿å±‚æ¬¡

**ä½¿ç”¨åœºæ™¯**ï¼š

- å¤šç»´åº¦å˜åŒ–
- é¿å…ç»§æ‰¿çˆ†ç‚¸
- æŠ½è±¡å’Œå®ç°éœ€è¦ç‹¬ç«‹å˜åŒ–

```javascript
// å®ç°æ¥å£
class DrawAPI {
  drawCircle(x, y, radius) {
    throw new Error("drawCircle method must be implemented");
  }
}

class RedCircle extends DrawAPI {
  drawCircle(x, y, radius) {
    console.log(`ç»˜åˆ¶çº¢è‰²åœ†å½¢: ä½ç½®(${x}, ${y}), åŠå¾„ ${radius}`);
  }
}

class GreenCircle extends DrawAPI {
  drawCircle(x, y, radius) {
    console.log(`ç»˜åˆ¶ç»¿è‰²åœ†å½¢: ä½ç½®(${x}, ${y}), åŠå¾„ ${radius}`);
  }
}

// æŠ½è±¡ç±»
class Shape {
  constructor(drawAPI) {
    this.drawAPI = drawAPI;
  }

  draw() {
    throw new Error("draw method must be implemented");
  }
}

class Circle extends Shape {
  constructor(x, y, radius, drawAPI) {
    super(drawAPI);
    this.x = x;
    this.y = y;
    this.radius = radius;
  }

  draw() {
    this.drawAPI.drawCircle(this.x, this.y, this.radius);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const redCircle = new Circle(100, 100, 10, new RedCircle());
const greenCircle = new Circle(100, 100, 10, new GreenCircle());

redCircle.draw();
greenCircle.draw();
```

#### 6. ç»„åˆæ¨¡å¼ {#ç»„åˆæ¨¡å¼}

**è§£é‡Š**ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º"éƒ¨åˆ†-æ•´ä½“"çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚

**ä¼˜ç‚¹**ï¼š

- ç»Ÿä¸€å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡
- ç®€åŒ–å®¢æˆ·ç«¯ä»£ç 
- å®¹æ˜“æ·»åŠ æ–°ç±»å‹çš„ç»„ä»¶

**ä½¿ç”¨åœºæ™¯**ï¼š

- æ ‘å½¢ç»“æ„
- æ–‡ä»¶ç³»ç»Ÿ
- UI ç»„ä»¶æ ‘

```javascript
// ç»„ä»¶æ¥å£
class Component {
  add(component) {
    throw new Error("add method must be implemented");
  }

  remove(component) {
    throw new Error("remove method must be implemented");
  }

  getChild(i) {
    throw new Error("getChild method must be implemented");
  }

  operation() {
    throw new Error("operation method must be implemented");
  }
}

// å¶å­èŠ‚ç‚¹
class Leaf extends Component {
  constructor(name) {
    super();
    this.name = name;
  }

  operation() {
    console.log(`å¶å­èŠ‚ç‚¹: ${this.name}`);
  }
}

// å¤åˆèŠ‚ç‚¹
class Composite extends Component {
  constructor(name) {
    super();
    this.name = name;
    this.children = [];
  }

  add(component) {
    this.children.push(component);
  }

  remove(component) {
    const index = this.children.indexOf(component);
    if (index !== -1) {
      this.children.splice(index, 1);
    }
  }

  getChild(i) {
    return this.children[i];
  }

  operation() {
    console.log(`å¤åˆèŠ‚ç‚¹: ${this.name}`);
    this.children.forEach((child) => child.operation());
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const root = new Composite("æ ¹èŠ‚ç‚¹");
const branch1 = new Composite("åˆ†æ”¯1");
const branch2 = new Composite("åˆ†æ”¯2");
const leaf1 = new Leaf("å¶å­1");
const leaf2 = new Leaf("å¶å­2");

root.add(branch1);
root.add(branch2);
branch1.add(leaf1);
branch2.add(leaf2);

root.operation();
```

#### 7. äº«å…ƒæ¨¡å¼ {#äº«å…ƒæ¨¡å¼}

**è§£é‡Š**ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚

**ä¼˜ç‚¹**ï¼š

- å‡å°‘å†…å­˜ä½¿ç”¨
- æé«˜æ€§èƒ½
- æ”¯æŒå¤§é‡å¯¹è±¡

**ä½¿ç”¨åœºæ™¯**ï¼š

- å¤§é‡ç›¸ä¼¼å¯¹è±¡
- å†…å­˜æ•æ„Ÿåº”ç”¨
- å¯¹è±¡æ± ç®¡ç†

```javascript
// äº«å…ƒå·¥å‚
class FlyweightFactory {
  constructor() {
    this.flyweights = {};
  }

  getFlyweight(key) {
    if (!this.flyweights[key]) {
      this.flyweights[key] = new ConcreteFlyweight(key);
    }
    return this.flyweights[key];
  }

  getCount() {
    return Object.keys(this.flyweights).length;
  }
}

// å…·ä½“äº«å…ƒ
class ConcreteFlyweight {
  constructor(intrinsicState) {
    this.intrinsicState = intrinsicState;
  }

  operation(extrinsicState) {
    console.log(`äº«å…ƒ: ${this.intrinsicState}, å¤–éƒ¨çŠ¶æ€: ${extrinsicState}`);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const factory = new FlyweightFactory();

const flyweight1 = factory.getFlyweight("A");
const flyweight2 = factory.getFlyweight("A");
const flyweight3 = factory.getFlyweight("B");

flyweight1.operation("çŠ¶æ€1");
flyweight2.operation("çŠ¶æ€2");
flyweight3.operation("çŠ¶æ€3");

console.log(factory.getCount()); // 2 (åªæœ‰ A å’Œ B ä¸¤ä¸ªäº«å…ƒå¯¹è±¡)
```

## è¡Œä¸ºå‹æ¨¡å¼

#### 1. è§‚å¯Ÿè€…æ¨¡å¼ {#è§‚å¯Ÿè€…æ¨¡å¼}

**è§£é‡Š**ï¼šå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚

**ä¼˜ç‚¹**ï¼š

- æ”¯æŒå¹¿æ’­é€šä¿¡
- é™ä½å¯¹è±¡é—´è€¦åˆåº¦
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

**ä½¿ç”¨åœºæ™¯**ï¼š

- äº‹ä»¶å¤„ç†ç³»ç»Ÿ
- æ¶ˆæ¯æ¨é€
- æ•°æ®ç»‘å®š

```javascript
// ä¸»é¢˜ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰
class Subject {
  constructor() {
    this.observers = [];
  }

  addObserver(observer) {
    this.observers.push(observer);
  }

  removeObserver(observer) {
    const index = this.observers.indexOf(observer);
    if (index !== -1) {
      this.observers.splice(index, 1);
    }
  }

  notify(data) {
    this.observers.forEach((observer) => observer.update(data));
  }
}

// è§‚å¯Ÿè€…
class Observer {
  constructor(name) {
    this.name = name;
  }

  update(data) {
    console.log(`${this.name} æ”¶åˆ°é€šçŸ¥: ${data}`);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const subject = new Subject();
const observer1 = new Observer("è§‚å¯Ÿè€…1");
const observer2 = new Observer("è§‚å¯Ÿè€…2");

subject.addObserver(observer1);
subject.addObserver(observer2);

subject.notify("æ•°æ®æ›´æ–°äº†ï¼");
```

#### 2. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ {#æ¨¡æ¿æ–¹æ³•æ¨¡å¼}

**è§£é‡Š**ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•éª¨æ¶ï¼Œå°†æŸäº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚

**ä¼˜ç‚¹**ï¼š

- ä»£ç å¤ç”¨
- æ‰©å±•æ€§å¥½
- ç¬¦åˆå¼€é—­åŸåˆ™

**ä½¿ç”¨åœºæ™¯**ï¼š

- ç®—æ³•æ¡†æ¶
- å·¥ä½œæµç¨‹
- é’©å­å‡½æ•°

```javascript
// æŠ½è±¡ç±»
class Beverage {
  prepare() {
    this.boilWater();
    this.brew();
    this.pourInCup();
    if (this.customerWantsCondiments()) {
      this.addCondiments();
    }
  }

  boilWater() {
    console.log("çƒ§å¼€æ°´");
  }

  brew() {
    throw new Error("brew method must be implemented");
  }

  pourInCup() {
    console.log("å€’å…¥æ¯ä¸­");
  }

  addCondiments() {
    throw new Error("addCondiments method must be implemented");
  }

  customerWantsCondiments() {
    return true; // é’©å­æ–¹æ³•
  }
}

// å…·ä½“å®ç°
class Coffee extends Beverage {
  brew() {
    console.log("ç”¨æ²¸æ°´å†²æ³¡å’–å•¡");
  }

  addCondiments() {
    console.log("åŠ å…¥ç³–å’Œç‰›å¥¶");
  }
}

class Tea extends Beverage {
  brew() {
    console.log("ç”¨æ²¸æ°´æµ¸æ³¡èŒ¶å¶");
  }

  addCondiments() {
    console.log("åŠ å…¥æŸ æª¬");
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const coffee = new Coffee();
const tea = new Tea();

console.log("åˆ¶ä½œå’–å•¡:");
coffee.prepare();

console.log("\nåˆ¶ä½œèŒ¶:");
tea.prepare();
```

#### 3. ç­–ç•¥æ¨¡å¼ {#ç­–ç•¥æ¨¡å¼}

**è§£é‡Š**ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠå®ƒä»¬å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·è€Œå˜åŒ–ã€‚

**ä¼˜ç‚¹**ï¼š

- ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢
- é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­
- æ‰©å±•æ€§å¥½

**ä½¿ç”¨åœºæ™¯**ï¼š

- æ”¯ä»˜æ–¹å¼é€‰æ‹©
- æ’åºç®—æ³•
- è¡¨å•éªŒè¯

```javascript
// ç­–ç•¥æ¥å£
class PaymentStrategy {
  pay(amount) {
    throw new Error("pay method must be implemented");
  }
}

// å…·ä½“ç­–ç•¥
class CreditCardPayment extends PaymentStrategy {
  pay(amount) {
    console.log(`ä½¿ç”¨ä¿¡ç”¨å¡æ”¯ä»˜: $${amount}`);
  }
}

class PayPalPayment extends PaymentStrategy {
  pay(amount) {
    console.log(`ä½¿ç”¨PayPalæ”¯ä»˜: $${amount}`);
  }
}

class CashPayment extends PaymentStrategy {
  pay(amount) {
    console.log(`ä½¿ç”¨ç°é‡‘æ”¯ä»˜: $${amount}`);
  }
}

// ä¸Šä¸‹æ–‡
class ShoppingCart {
  constructor() {
    this.paymentStrategy = null;
  }

  setPaymentStrategy(strategy) {
    this.paymentStrategy = strategy;
  }

  checkout(amount) {
    if (this.paymentStrategy) {
      this.paymentStrategy.pay(amount);
    } else {
      console.log("è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼");
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const cart = new ShoppingCart();
cart.setPaymentStrategy(new CreditCardPayment());
cart.checkout(100);

cart.setPaymentStrategy(new PayPalPayment());
cart.checkout(50);
```

#### 4. èŒè´£é“¾æ¨¡å¼ {#èŒè´£é“¾æ¨¡å¼}

**è§£é‡Š**ï¼šå°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚

**ä¼˜ç‚¹**ï¼š

- é™ä½è€¦åˆåº¦
- å¢å¼ºäº†ç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§
- å¢åŠ æ–°çš„å¤„ç†ç±»å¾ˆæ–¹ä¾¿

**ä½¿ç”¨åœºæ™¯**ï¼š

- å®¡æ‰¹æµç¨‹
- å¼‚å¸¸å¤„ç†
- è¿‡æ»¤å™¨é“¾

```javascript
// å¤„ç†å™¨åŸºç±»
class Handler {
  constructor() {
    this.nextHandler = null;
  }

  setNext(handler) {
    this.nextHandler = handler;
    return handler;
  }

  handle(request) {
    if (this.nextHandler) {
      return this.nextHandler.handle(request);
    }
    return null;
  }
}

// å…·ä½“å¤„ç†å™¨
class ConcreteHandlerA extends Handler {
  handle(request) {
    if (request.type === "A") {
      console.log(`å¤„ç†å™¨Aå¤„ç†è¯·æ±‚: ${request.content}`);
      return true;
    }
    return super.handle(request);
  }
}

class ConcreteHandlerB extends Handler {
  handle(request) {
    if (request.type === "B") {
      console.log(`å¤„ç†å™¨Bå¤„ç†è¯·æ±‚: ${request.content}`);
      return true;
    }
    return super.handle(request);
  }
}

class ConcreteHandlerC extends Handler {
  handle(request) {
    if (request.type === "C") {
      console.log(`å¤„ç†å™¨Cå¤„ç†è¯·æ±‚: ${request.content}`);
      return true;
    }
    return super.handle(request);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const handlerA = new ConcreteHandlerA();
const handlerB = new ConcreteHandlerB();
const handlerC = new ConcreteHandlerC();

handlerA.setNext(handlerB).setNext(handlerC);

const request1 = { type: "A", content: "è¯·æ±‚A" };
const request2 = { type: "B", content: "è¯·æ±‚B" };
const request3 = { type: "C", content: "è¯·æ±‚C" };

handlerA.handle(request1);
handlerA.handle(request2);
handlerA.handle(request3);
```

#### 5. å‘½ä»¤æ¨¡å¼ {#å‘½ä»¤æ¨¡å¼}

**è§£é‡Š**ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œè®©ä½ å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼Œå¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚

**ä¼˜ç‚¹**ï¼š

- é™ä½ç³»ç»Ÿè€¦åˆåº¦
- æ˜“äºæ‰©å±•æ–°å‘½ä»¤
- æ”¯æŒæ’¤é”€å’Œé‡åš

**ä½¿ç”¨åœºæ™¯**ï¼š

- èœå•æ“ä½œ
- å®å‘½ä»¤
- äº‹åŠ¡å¤„ç†

```javascript
// å‘½ä»¤æ¥å£
class Command {
  execute() {
    throw new Error("execute method must be implemented");
  }

  undo() {
    throw new Error("undo method must be implemented");
  }
}

// æ¥æ”¶è€…
class Light {
  turnOn() {
    console.log("ç¯äº®äº†");
  }

  turnOff() {
    console.log("ç¯ç­äº†");
  }
}

// å…·ä½“å‘½ä»¤
class LightOnCommand extends Command {
  constructor(light) {
    super();
    this.light = light;
  }

  execute() {
    this.light.turnOn();
  }

  undo() {
    this.light.turnOff();
  }
}

class LightOffCommand extends Command {
  constructor(light) {
    super();
    this.light = light;
  }

  execute() {
    this.light.turnOff();
  }

  undo() {
    this.light.turnOn();
  }
}

// è°ƒç”¨è€…
class RemoteControl {
  constructor() {
    this.commands = [];
  }

  setCommand(command) {
    this.commands.push(command);
  }

  pressButton() {
    if (this.commands.length > 0) {
      const command = this.commands.shift();
      command.execute();
    }
  }

  pressUndo() {
    if (this.commands.length > 0) {
      const command = this.commands.pop();
      command.undo();
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const light = new Light();
const lightOn = new LightOnCommand(light);
const lightOff = new LightOffCommand(light);

const remote = new RemoteControl();
remote.setCommand(lightOn);
remote.setCommand(lightOff);

remote.pressButton(); // ç¯äº®äº†
remote.pressButton(); // ç¯ç­äº†
remote.pressUndo(); // ç¯äº®äº†
```

#### 6. è®¿é—®è€…æ¨¡å¼ {#è®¿é—®è€…æ¨¡å¼}

**è§£é‡Š**ï¼šåœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹ï¼Œå®šä¹‰ä½œç”¨äºå…¶å…ƒç´ çš„æ–°æ“ä½œã€‚

**ä¼˜ç‚¹**ï¼š

- æ˜“äºå¢åŠ æ–°çš„æ“ä½œ
- å°†æ•°æ®ç»“æ„ä¸æ“ä½œåˆ†ç¦»
- ç¬¦åˆå¼€é—­åŸåˆ™

**ä½¿ç”¨åœºæ™¯**ï¼š

- ç¼–è¯‘å™¨
- æ–‡æ¡£å¤„ç†
- æŠ¥è¡¨ç”Ÿæˆ

```javascript
// å…ƒç´ æ¥å£
class Element {
  accept(visitor) {
    throw new Error("accept method must be implemented");
  }
}

// å…·ä½“å…ƒç´ 
class ConcreteElementA extends Element {
  accept(visitor) {
    visitor.visitConcreteElementA(this);
  }

  operationA() {
    return "å…ƒç´ Açš„æ“ä½œ";
  }
}

class ConcreteElementB extends Element {
  accept(visitor) {
    visitor.visitConcreteElementB(this);
  }

  operationB() {
    return "å…ƒç´ Bçš„æ“ä½œ";
  }
}

// è®¿é—®è€…æ¥å£
class Visitor {
  visitConcreteElementA(element) {
    throw new Error("visitConcreteElementA method must be implemented");
  }

  visitConcreteElementB(element) {
    throw new Error("visitConcreteElementB method must be implemented");
  }
}

// å…·ä½“è®¿é—®è€…
class ConcreteVisitor1 extends Visitor {
  visitConcreteElementA(element) {
    console.log(`è®¿é—®è€…1è®¿é—®å…ƒç´ A: ${element.operationA()}`);
  }

  visitConcreteElementB(element) {
    console.log(`è®¿é—®è€…1è®¿é—®å…ƒç´ B: ${element.operationB()}`);
  }
}

class ConcreteVisitor2 extends Visitor {
  visitConcreteElementA(element) {
    console.log(`è®¿é—®è€…2è®¿é—®å…ƒç´ A: ${element.operationA()}`);
  }

  visitConcreteElementB(element) {
    console.log(`è®¿é—®è€…2è®¿é—®å…ƒç´ B: ${element.operationB()}`);
  }
}

// å¯¹è±¡ç»“æ„
class ObjectStructure {
  constructor() {
    this.elements = [];
  }

  attach(element) {
    this.elements.push(element);
  }

  detach(element) {
    const index = this.elements.indexOf(element);
    if (index !== -1) {
      this.elements.splice(index, 1);
    }
  }

  accept(visitor) {
    this.elements.forEach((element) => element.accept(visitor));
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const objectStructure = new ObjectStructure();
const elementA = new ConcreteElementA();
const elementB = new ConcreteElementB();

objectStructure.attach(elementA);
objectStructure.attach(elementB);

const visitor1 = new ConcreteVisitor1();
const visitor2 = new ConcreteVisitor2();

objectStructure.accept(visitor1);
objectStructure.accept(visitor2);
```

#### 7. çŠ¶æ€æ¨¡å¼ {#çŠ¶æ€æ¨¡å¼}

**è§£é‡Š**ï¼šå…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒçš„ç±»ã€‚

**ä¼˜ç‚¹**ï¼š

- æ¶ˆé™¤åºå¤§çš„æ¡ä»¶åˆ†æ”¯è¯­å¥
- çŠ¶æ€è½¬æ¢é€»è¾‘ä¸çŠ¶æ€å¯¹è±¡åˆæˆä¸€ä½“
- æ˜“äºå¢åŠ æ–°çš„çŠ¶æ€

**ä½¿ç”¨åœºæ™¯**ï¼š

- æ¸¸æˆçŠ¶æ€ç®¡ç†
- å·¥ä½œæµå¼•æ“
- è®¢å•çŠ¶æ€

```javascript
// çŠ¶æ€æ¥å£
class State {
  handle(context) {
    throw new Error("handle method must be implemented");
  }
}

// å…·ä½“çŠ¶æ€
class ConcreteStateA extends State {
  handle(context) {
    console.log("å½“å‰çŠ¶æ€: A");
    context.setState(new ConcreteStateB());
  }
}

class ConcreteStateB extends State {
  handle(context) {
    console.log("å½“å‰çŠ¶æ€: B");
    context.setState(new ConcreteStateC());
  }
}

class ConcreteStateC extends State {
  handle(context) {
    console.log("å½“å‰çŠ¶æ€: C");
    context.setState(new ConcreteStateA());
  }
}

// ä¸Šä¸‹æ–‡
class Context {
  constructor() {
    this.state = new ConcreteStateA();
  }

  setState(state) {
    this.state = state;
  }

  request() {
    this.state.handle(this);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const context = new Context();

context.request(); // å½“å‰çŠ¶æ€: A
context.request(); // å½“å‰çŠ¶æ€: B
context.request(); // å½“å‰çŠ¶æ€: C
context.request(); // å½“å‰çŠ¶æ€: A
```

#### 8. å¤‡å¿˜å½•æ¨¡å¼ {#å¤‡å¿˜å½•æ¨¡å¼}

**è§£é‡Š**ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œè¿™æ ·ä»¥åå°±å¯ä»¥å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚

**ä¼˜ç‚¹**ï¼š

- ä¿æŒå°è£…è¾¹ç•Œ
- ç®€åŒ–å‘èµ·äºº
- æä¾›çŠ¶æ€æ¢å¤æœºåˆ¶

**ä½¿ç”¨åœºæ™¯**ï¼š

- æ’¤é”€åŠŸèƒ½
- æ¸¸æˆå­˜æ¡£
- äº‹åŠ¡å›æ»š

```javascript
// å¤‡å¿˜å½•
class Memento {
  constructor(state) {
    this.state = state;
  }

  getState() {
    return this.state;
  }
}

// å‘èµ·äºº
class Originator {
  constructor() {
    this.state = "";
  }

  setState(state) {
    this.state = state;
  }

  getState() {
    return this.state;
  }

  saveStateToMemento() {
    return new Memento(this.state);
  }

  getStateFromMemento(memento) {
    this.state = memento.getState();
  }
}

// ç®¡ç†è€…
class CareTaker {
  constructor() {
    this.mementoList = [];
  }

  add(memento) {
    this.mementoList.push(memento);
  }

  get(index) {
    return this.mementoList[index];
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const originator = new Originator();
const careTaker = new CareTaker();

originator.setState("çŠ¶æ€ #1");
originator.setState("çŠ¶æ€ #2");
careTaker.add(originator.saveStateToMemento());

originator.setState("çŠ¶æ€ #3");
careTaker.add(originator.saveStateToMemento());

originator.setState("çŠ¶æ€ #4");

console.log("å½“å‰çŠ¶æ€: " + originator.getState());
originator.getStateFromMemento(careTaker.get(0));
console.log("ç¬¬ä¸€æ¬¡ä¿å­˜çš„çŠ¶æ€: " + originator.getState());
originator.getStateFromMemento(careTaker.get(1));
console.log("ç¬¬äºŒæ¬¡ä¿å­˜çš„çŠ¶æ€: " + originator.getState());
```

#### 9. è¿­ä»£å™¨æ¨¡å¼ {#è¿­ä»£å™¨æ¨¡å¼}

**è§£é‡Š**ï¼šæä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤ºã€‚

**ä¼˜ç‚¹**ï¼š

- ç®€åŒ–èšåˆç±»
- æ”¯æŒå¤šç§éå†æ–¹å¼
- ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™

**ä½¿ç”¨åœºæ™¯**ï¼š

- é›†åˆéå†
- æ•°æ®åº“æŸ¥è¯¢ç»“æœ
- æ–‡ä»¶ç³»ç»Ÿéå†

```javascript
// è¿­ä»£å™¨æ¥å£
class Iterator {
  hasNext() {
    throw new Error("hasNext method must be implemented");
  }

  next() {
    throw new Error("next method must be implemented");
  }
}

// èšåˆæ¥å£
class Aggregate {
  createIterator() {
    throw new Error("createIterator method must be implemented");
  }
}

// å…·ä½“èšåˆ
class ConcreteAggregate extends Aggregate {
  constructor() {
    super();
    this.items = [];
  }

  addItem(item) {
    this.items.push(item);
  }

  createIterator() {
    return new ConcreteIterator(this);
  }
}

// å…·ä½“è¿­ä»£å™¨
class ConcreteIterator extends Iterator {
  constructor(aggregate) {
    super();
    this.aggregate = aggregate;
    this.current = 0;
  }

  hasNext() {
    return this.current < this.aggregate.items.length;
  }

  next() {
    if (this.hasNext()) {
      return this.aggregate.items[this.current++];
    }
    return null;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const aggregate = new ConcreteAggregate();
aggregate.addItem("é¡¹ç›®1");
aggregate.addItem("é¡¹ç›®2");
aggregate.addItem("é¡¹ç›®3");

const iterator = aggregate.createIterator();

while (iterator.hasNext()) {
  console.log(iterator.next());
}
```

#### 10. è§£é‡Šå™¨æ¨¡å¼ {#è§£é‡Šå™¨æ¨¡å¼}

**è§£é‡Š**ï¼šç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚

**ä¼˜ç‚¹**ï¼š

- æ˜“äºæ”¹å˜å’Œæ‰©å±•æ–‡æ³•
- æ¯ä¸ªæ–‡æ³•è§„åˆ™éƒ½å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªç±»
- å®ç°æ–‡æ³•è¾ƒä¸ºå®¹æ˜“

**ä½¿ç”¨åœºæ™¯**ï¼š

- ç¼–è¯‘å™¨
- è¡¨è¾¾å¼æ±‚å€¼
- é…ç½®æ–‡ä»¶è§£æ

```javascript
// æŠ½è±¡è¡¨è¾¾å¼
class Expression {
  interpret(context) {
    throw new Error("interpret method must be implemented");
  }
}

// ç»ˆç»“ç¬¦è¡¨è¾¾å¼
class TerminalExpression extends Expression {
  constructor(data) {
    super();
    this.data = data;
  }

  interpret(context) {
    return context.includes(this.data);
  }
}

// éç»ˆç»“ç¬¦è¡¨è¾¾å¼
class OrExpression extends Expression {
  constructor(expr1, expr2) {
    super();
    this.expr1 = expr1;
    this.expr2 = expr2;
  }

  interpret(context) {
    return this.expr1.interpret(context) || this.expr2.interpret(context);
  }
}

class AndExpression extends Expression {
  constructor(expr1, expr2) {
    super();
    this.expr1 = expr1;
    this.expr2 = expr2;
  }

  interpret(context) {
    return this.expr1.interpret(context) && this.expr2.interpret(context);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
function getMaleExpression() {
  const robert = new TerminalExpression("Robert");
  const john = new TerminalExpression("John");
  return new OrExpression(robert, john);
}

function getMarriedWomanExpression() {
  const julie = new TerminalExpression("Julie");
  const married = new TerminalExpression("Married");
  return new AndExpression(julie, married);
}

const isMale = getMaleExpression();
const isMarriedWoman = getMarriedWomanExpression();

console.log("John is male? " + isMale.interpret("John"));
console.log(
  "Julie is a married woman? " + isMarriedWoman.interpret("Married Julie")
);
```

---

## ğŸ“š æ€»ç»“

### ğŸ¯ è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒä»·å€¼

1. **æé«˜ä»£ç è´¨é‡**: ä½¿ä»£ç æ›´åŠ æ¸…æ™°ã€å¯è¯»ã€å¯ç»´æŠ¤
2. **å¢å¼ºå¯æ‰©å±•æ€§**: ä¾¿äºæ·»åŠ æ–°åŠŸèƒ½è€Œä¸å½±å“ç°æœ‰ä»£ç 
3. **é™ä½è€¦åˆåº¦**: å‡å°‘æ¨¡å—é—´çš„ä¾èµ–å…³ç³»
4. **æé«˜å¤ç”¨æ€§**: ç›¸åŒçš„è§£å†³æ–¹æ¡ˆå¯ä»¥åœ¨ä¸åŒåœºæ™¯ä¸­å¤ç”¨

### ğŸ”§ å‰ç«¯å¼€å‘ä¸­çš„å®é™…åº”ç”¨

#### å¸¸ç”¨åœºæ™¯

- **ç»„ä»¶åº“å¼€å‘**: å·¥å‚æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼
- **çŠ¶æ€ç®¡ç†**: å•ä¾‹æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼
- **è·¯ç”±ç³»ç»Ÿ**: ç­–ç•¥æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼
- **è¡¨å•å¤„ç†**: ç­–ç•¥æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼
- **äº‹ä»¶ç³»ç»Ÿ**: è§‚å¯Ÿè€…æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼

#### é€‰æ‹©å»ºè®®

1. **ç®€å•åœºæ™¯**: ä¼˜å…ˆè€ƒè™‘å•ä¾‹ã€å·¥å‚ã€è§‚å¯Ÿè€…
2. **å¤æ‚äº¤äº’**: è€ƒè™‘çŠ¶æ€ã€å‘½ä»¤ã€èŒè´£é“¾
3. **æ€§èƒ½ä¼˜åŒ–**: è€ƒè™‘ä»£ç†ã€äº«å…ƒã€å¤‡å¿˜å½•
4. **æ‰©å±•éœ€æ±‚**: è€ƒè™‘ç­–ç•¥ã€è£…é¥°å™¨ã€é€‚é…å™¨

### ğŸ“– å­¦ä¹ å»ºè®®

1. **ç†è§£åŸç†**: ä¸è¦æ­»è®°ç¡¬èƒŒï¼Œè¦ç†è§£æ¯ä¸ªæ¨¡å¼è§£å†³çš„é—®é¢˜
2. **å®è·µåº”ç”¨**: åœ¨å®é™…é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨ï¼Œä»ç®€å•å¼€å§‹
3. **ç»„åˆä½¿ç”¨**: å¤šä¸ªæ¨¡å¼å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œå‘æŒ¥æ›´å¤§å¨åŠ›
4. **é€‚åº¦ä½¿ç”¨**: ä¸è¦è¿‡åº¦è®¾è®¡ï¼Œä¿æŒä»£ç ç®€æ´

### ğŸ”— ç›¸å…³èµ„æº

- [JavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ](https://github.com/ConardLi/awesome-coding-js)
- [React è®¾è®¡æ¨¡å¼](https://reactpatterns.com/)
- [Vue è®¾è®¡æ¨¡å¼](https://vuejs.org/guide/extras/ways-of-using-vue.html)
- [TypeScript è®¾è®¡æ¨¡å¼](https://refactoring.guru/design-patterns/typescript)
